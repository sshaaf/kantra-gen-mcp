---
- ruleID: "create-spring-boot-application-class"
  message: |
    Replace Struts `ActionServlet` configuration with a Spring Boot Application class.

    **Before (web.xml with ActionServlet):**
    ```xml
    <servlet>
        <servlet-name>action</servlet-name>
        <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
        <init-param>
            <param-name>config</param-name>
            <param-value>/WEB-INF/struts-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>action</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>
    ```

    **After (Spring Boot Application):**
    ```java
    package com.example;

    import org.springframework.boot.SpringApplication;
    import org.springframework.boot.autoconfigure.SpringBootApplication;

    @SpringBootApplication
    public class Application {
        public static void main(String[] args) {
            SpringApplication.run(Application.class, args);
        }
    }
    ```

    **Also create application.yml:**
    ```yaml
    spring:
      datasource:
        url: jdbc:h2:mem:testdb
        driver-class-name: org.h2.Driver
      jpa:
        hibernate:
          ddl-auto: update
      thymeleaf:
        cache: false

    server:
      port: 8080
    ```

    **Migration Actions:**
    - Delete `web.xml`
    - Delete `struts-config.xml`
    - Create `@SpringBootApplication` class
    - Create `application.yml` with configuration
  description: "Detects Java import: org.apache.struts.action.ActionServlet"
  category: "mandatory"
  effort: 2
  labels:
    - "konveyor.io/source=struts"
    - "konveyor.io/target=springboot"
  links:
    - title: "Struts to Spring Boot Migration Spec"
      url: "https://github.com/migtools/getting-started/blob/main/struts-1.0/spec.md"
    - title: "Spring Boot Getting Started"
      url: "https://docs.spring.io/spring-boot/reference/"
  tag: []
  customVariable: []
  when:
    java.referenced:
      pattern: "org.apache.struts.action.ActionServlet"
      location: "IMPORT"
