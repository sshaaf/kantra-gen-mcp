---
- ruleID: "struts-actionerrors-to-bindingresult"
  message: |
    `ActionErrors` must be replaced with Spring's `BindingResult` and Bean Validation.

    **Before (Struts ActionErrors):**
    ```java
    import org.apache.struts.action.ActionErrors;
    import org.apache.struts.action.ActionMessage;

    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response) {
        AccountForm accountForm = (AccountForm) form;
        ActionErrors errors = accountForm.validate(mapping, request);

        if (!errors.isEmpty()) {
            saveErrors(request, errors);
            return mapping.findForward("input");
        }
        // proceed with business logic
    }
    ```

    **After (Spring BindingResult):**
    ```java
    import org.springframework.validation.BindingResult;
    import jakarta.validation.Valid;

    @PostMapping("/save")
    public String saveAccount(@Valid @ModelAttribute AccountDTO accountDTO,
                              BindingResult bindingResult,
                              Model model) {
        if (bindingResult.hasErrors()) {
            return "account/form";  // Return to form with errors
        }
        // proceed with business logic
        return "redirect:/accounts";
    }
    ```

    **Error Handling Mapping:**
    | Struts | Spring |
    |--------|--------|
    | `ActionErrors errors = form.validate()` | `@Valid` + `BindingResult` |
    | `errors.add(field, ActionMessage)` | `@NotBlank`, `@Size` annotations |
    | `saveErrors(request, errors)` | Automatic via `BindingResult` |
    | `!errors.isEmpty()` | `bindingResult.hasErrors()` |
  description: "Detects Java import: org.apache.struts.action.ActionErrors"
  category: "mandatory"
  effort: 3
  labels:
    - "konveyor.io/source=struts"
    - "konveyor.io/target=springboot"
  links:
    - title: "Struts to Spring Boot Migration Spec"
      url: "https://github.com/migtools/getting-started/blob/main/struts-1.0/spec.md"
    - title: "Spring Validation"
      url: "https://docs.spring.io/spring-framework/reference/core/validation/beanvalidation.html"
  tag: []
  customVariable: []
  when:
    java.referenced:
      pattern: "org.apache.struts.action.ActionErrors"
      location: "IMPORT"
