---
- ruleID: "struts-dependency-in-pom"
  message: |
    Struts dependencies must be removed and replaced with Spring Boot starters.

    **Remove these dependencies:**
    ```xml
    <!-- REMOVE -->
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts-core</artifactId>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts-taglib</artifactId>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts-extras</artifactId>
    </dependency>
    ```

    **Add Spring Boot dependencies:**
    ```xml
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.2.0</version>
    </parent>

    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-thymeleaf</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-validation</artifactId>
        </dependency>
    </dependencies>
    ```

    **Also update Java version:**
    ```xml
    <properties>
        <java.version>17</java.version>
    </properties>
    ```
  description: "Detects XML content: //dependency[artifactId[contains(text(),'struts')]]"
  category: "mandatory"
  effort: 2
  labels:
    - "konveyor.io/source=struts"
    - "konveyor.io/target=springboot"
  links:
    - title: "Struts to Spring Boot Migration Spec"
      url: "https://github.com/migtools/getting-started/blob/main/struts-1.0/spec.md"
    - title: "Spring Boot Starters"
      url: "https://docs.spring.io/spring-boot/reference/using/build-systems.html"
  tag: []
  customVariable: []
  when:
    builtin.xml:
      xpath: "//dependency[artifactId[contains(text(),'struts')]]"
