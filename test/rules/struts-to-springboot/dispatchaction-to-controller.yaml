---
- ruleID: "struts-dispatchaction-to-controller"
  message: |
    `DispatchAction` with multiple methods must be converted to a Spring Controller with multiple endpoints.

    **Before (Struts DispatchAction):**
    ```java
    import org.apache.struts.actions.DispatchAction;

    public class AccountDispatchAction extends DispatchAction {

        public ActionForward list(ActionMapping mapping, ActionForm form,
                HttpServletRequest request, HttpServletResponse response) {
            // list logic
            return mapping.findForward("list");
        }

        public ActionForward save(ActionMapping mapping, ActionForm form,
                HttpServletRequest request, HttpServletResponse response) {
            // save logic
            return mapping.findForward("success");
        }

        public ActionForward delete(ActionMapping mapping, ActionForm form,
                HttpServletRequest request, HttpServletResponse response) {
            // delete logic
            return mapping.findForward("success");
        }
    }
    ```

    **After (Spring Controller):**
    ```java
    @Controller
    @RequestMapping("/accounts")
    public class AccountController {

        @GetMapping
        public String list(Model model) {
            // list logic
            return "account/list";
        }

        @PostMapping
        public String save(@Valid @ModelAttribute AccountDTO dto,
                           BindingResult result) {
            // save logic
            return "redirect:/accounts";
        }

        @DeleteMapping("/{id}")
        public String delete(@PathVariable Long id) {
            // delete logic
            return "redirect:/accounts";
        }
    }
    ```

    **Method Mapping:**
    | DispatchAction | Spring Controller |
    |----------------|-------------------|
    | `list()` | `@GetMapping` |
    | `save()` | `@PostMapping` |
    | `delete()` | `@DeleteMapping` |
    | `edit()` | `@GetMapping("/{id}/edit")` |
  description: "Detects Java inheritance: org.apache.struts.actions.DispatchAction"
  category: "mandatory"
  effort: 3
  labels:
    - "konveyor.io/source=struts"
    - "konveyor.io/target=springboot"
  links:
    - title: "Struts to Spring Boot Migration Spec"
      url: "https://github.com/migtools/getting-started/blob/main/struts-1.0/spec.md"
    - title: "Spring MVC Controllers"
      url: "https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller.html"
  tag: []
  customVariable: []
  when:
    java.referenced:
      pattern: "org.apache.struts.actions.DispatchAction"
      location: "INHERITANCE"
