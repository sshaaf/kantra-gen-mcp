---
- ruleID: "struts-config-xml-detected"
  message: |
    `struts-config.xml` must be migrated to Spring Boot annotations and `application.yml`.

    **Before (struts-config.xml):**
    ```xml
    <struts-config>
        <form-beans>
            <form-bean name="accountForm" type="com.example.form.AccountForm"/>
        </form-beans>

        <action-mappings>
            <action path="/account/list"
                    type="com.example.action.ListAccountsAction">
                <forward name="success" path="/WEB-INF/jsp/accounts.jsp"/>
            </action>
        </action-mappings>

        <message-resources parameter="ApplicationResources"/>
    </struts-config>
    ```

    **After (Spring Boot):**

    1. **Delete struts-config.xml** - Use annotations instead

    2. **Controller annotations replace action-mappings:**
    ```java
    @Controller
    @RequestMapping("/account")
    public class AccountController {
        @GetMapping("/list")
        public String list() { return "accounts"; }
    }
    ```

    3. **DTOs replace form-beans** (no XML config needed)

    4. **application.yml for message resources:**
    ```yaml
    spring:
      messages:
        basename: messages
    ```

    **Migration Checklist:**
    - [ ] Extract action paths → `@RequestMapping`
    - [ ] Extract form-beans → Create DTO classes
    - [ ] Extract forwards → View name strings
    - [ ] Extract message-resources → `application.yml`
    - [ ] Delete struts-config.xml
  description: "Detects files matching: struts-config.xml"
  category: "mandatory"
  effort: 3
  labels:
    - "konveyor.io/source=struts"
    - "konveyor.io/target=springboot"
  links:
    - title: "Struts to Spring Boot Migration Spec"
      url: "https://github.com/migtools/getting-started/blob/main/struts-1.0/spec.md"
    - title: "Spring Boot Configuration"
      url: "https://docs.spring.io/spring-boot/reference/features/external-config.html"
  tag: []
  customVariable: []
  when:
    builtin.file:
      pattern: "struts-config.xml"
