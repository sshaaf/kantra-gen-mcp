---
- ruleID: "struts-actionform-to-dto"
  message: |
    Struts `ActionForm` classes must be converted to DTOs with Bean Validation.

    **Before (Struts ActionForm):**
    ```java
    import org.apache.struts.action.ActionForm;
    import org.apache.struts.action.ActionErrors;
    import org.apache.struts.action.ActionMessage;

    public class AccountForm extends ActionForm {
        private String accountNumber;
        private String balance;

        public ActionErrors validate(ActionMapping mapping,
                HttpServletRequest request) {
            ActionErrors errors = new ActionErrors();
            if (accountNumber == null || accountNumber.isEmpty()) {
                errors.add("accountNumber",
                    new ActionMessage("error.accountNumber.required"));
            }
            return errors;
        }
        // getters and setters
    }
    ```

    **After (DTO with Bean Validation):**
    ```java
    import jakarta.validation.constraints.*;

    public class AccountDTO {
        @NotBlank(message = "{error.accountNumber.required}")
        @Size(min = 10, max = 20)
        private String accountNumber;

        @NotNull
        @DecimalMin(value = "0.0")
        private BigDecimal balance;

        // getters and setters
    }
    ```

    **Validation Mapping:**
    | Struts Pattern | Bean Validation |
    |----------------|------------------|
    | `isEmpty()` check | `@NotBlank` |
    | `null` check | `@NotNull` |
    | Length validation | `@Size(min, max)` |
    | Numeric range | `@Min`, `@Max`, `@DecimalMin` |
    | Pattern matching | `@Pattern(regexp)` |
    | Email validation | `@Email` |
  description: "Detects Java inheritance: org.apache.struts.action.ActionForm"
  category: "mandatory"
  effort: 3
  labels:
    - "konveyor.io/source=struts"
    - "konveyor.io/target=springboot"
  links:
    - title: "Struts to Spring Boot Migration Spec"
      url: "https://github.com/migtools/getting-started/blob/main/struts-1.0/spec.md"
    - title: "Bean Validation"
      url: "https://beanvalidation.org/"
  tag: []
  customVariable: []
  when:
    java.referenced:
      pattern: "org.apache.struts.action.ActionForm"
      location: "INHERITANCE"
